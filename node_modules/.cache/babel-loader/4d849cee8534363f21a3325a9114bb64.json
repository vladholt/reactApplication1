{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _EventDispatcher = require('./EventDispatcher');\n\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\nvar _ScrollElement2 = require('./ScrollElement');\n\nvar _ScrollElement3 = _interopRequireDefault(_ScrollElement2);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar ScrollOverPack = function (_ScrollElement) {\n  (0, _inherits3['default'])(ScrollOverPack, _ScrollElement);\n  (0, _createClass3['default'])(ScrollOverPack, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, _ref) {\n      var prevProps = _ref.prevProps;\n      var nextState = {\n        prevProps: props\n      };\n\n      if (prevProps && props !== prevProps) {\n        nextState.children = (0, _util.toArrayChildren)(props.children);\n      }\n\n      return nextState;\n    }\n  }]);\n\n  function ScrollOverPack(props) {\n    (0, _classCallCheck3['default'])(this, ScrollOverPack);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (ScrollOverPack.__proto__ || Object.getPrototypeOf(ScrollOverPack)).call(this, props));\n\n    _this.scrollEventListener = function (e) {\n      _this.getParam(e);\n\n      var show = _this.state.show;\n      var _this$props = _this.props,\n          always = _this$props.always,\n          replay = _this$props.replay;\n      var isTop = _this.elementShowHeight > _this.clientHeight + _this.leavePlayHeight;\n\n      if (_this.enter || !replay && isTop) {\n        if (!show) {\n          _this.setState({\n            show: true\n          });\n        }\n\n        if (!always && _this.eventType) {\n          _EventDispatcher2['default'].removeEventListener(_this.eventType, _this.scrollEventListener, _this.target);\n        }\n      } else if (always) {\n        var bottomLeave = _this.elementShowHeight < _this.playHeight; // 设置往上时的出场点...\n\n        var topLeave = replay ? isTop : null;\n\n        if (topLeave || bottomLeave) {\n          if (show) {\n            _this.setState({\n              show: false\n            });\n          }\n        }\n      }\n    };\n\n    _this.children = (0, _util.toArrayChildren)(props.children);\n    _this.oneEnter = false;\n    _this.enter = false;\n    _this.state = {\n      show: false,\n      children: (0, _util.toArrayChildren)(props.children)\n    };\n    return _this;\n  }\n\n  (0, _createClass3['default'])(ScrollOverPack, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      if (prevProps !== this.props) {\n        var always = this.props.always;\n        var show = this.state.show;\n\n        var inListener = _EventDispatcher2['default']._listeners.scroll && _EventDispatcher2['default']._listeners.scroll.some(function (c) {\n          return c.n === _this2.eventType.split('.')[1];\n        });\n\n        if (always && !inListener) {\n          this.addScrollEvent();\n        } else if (!always && !show) {\n          this.scrollEventListener();\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          playScale = _props.playScale,\n          replay = _props.replay,\n          component = _props.component,\n          always = _props.always,\n          scrollEvent = _props.scrollEvent,\n          appear = _props.appear,\n          location = _props.location,\n          targetId = _props.targetId,\n          onChange = _props.onChange,\n          onScroll = _props.onScroll,\n          componentProps = _props.componentProps,\n          props = (0, _objectWithoutProperties3['default'])(_props, ['playScale', 'replay', 'component', 'always', 'scrollEvent', 'appear', 'location', 'targetId', 'onChange', 'onScroll', 'componentProps']);\n\n      if (_util.windowIsUndefined) {\n        return (0, _react.createElement)(component, (0, _extends3['default'])({}, props, componentProps));\n      }\n\n      var childToRender = void 0;\n\n      if (!this.oneEnter) {\n        var show = !appear;\n        var children = (0, _util.toArrayChildren)(props.children).map(function (item) {\n          if (!item) {\n            return null;\n          }\n\n          var key = item.key || (Date.now() + Math.random()).toString(16).replace('.', '');\n          return item.type.isTweenOne ? _react2['default'].cloneElement(item, (0, _extends3['default'])({}, item.props, {\n            key: key,\n            paused: !show\n          })) : _react2['default'].cloneElement(item, (0, _extends3['default'])({}, item.props, {\n            key: key\n          }), show && item.props.children);\n        });\n        childToRender = (0, _react.createElement)(component, (0, _extends3['default'])({}, props, componentProps), children);\n        this.oneEnter = true;\n      } else {\n        if (!this.state.show) {\n          this.children = this.children.map(function (item) {\n            if (!item) {\n              return null;\n            }\n\n            var key = item.key || (Date.now() + Math.random()).toString(16).replace('.', ''); // 判断 TweenOne;\n\n            if (item.type.isTweenOne) {\n              return _react2['default'].cloneElement(item, {\n                key: key,\n                reverse: true\n              });\n            }\n\n            return _react2['default'].cloneElement(item, {\n              key: key\n            }, null);\n          });\n        } else {\n          this.children = this.state.children;\n        }\n\n        childToRender = (0, _react.createElement)(component, (0, _extends3['default'])({}, props, componentProps), this.children);\n      }\n\n      return childToRender;\n    }\n  }]);\n  return ScrollOverPack;\n}(_ScrollElement3['default']);\n\nScrollOverPack.propTypes = {\n  component: _propTypes2['default'].any,\n  playScale: _propTypes2['default'].any,\n  always: _propTypes2['default'].bool,\n  scrollEvent: _propTypes2['default'].func,\n  children: _propTypes2['default'].any,\n  className: _propTypes2['default'].string,\n  style: _propTypes2['default'].any,\n  replay: _propTypes2['default'].bool,\n  onChange: _propTypes2['default'].func,\n  onScroll: _propTypes2['default'].func,\n  appear: _propTypes2['default'].bool,\n  componentProps: _propTypes2['default'].object\n};\nScrollOverPack.defaultProps = {\n  component: 'div',\n  playScale: 0.5,\n  always: true,\n  scrollEvent: _util.noop,\n  replay: false,\n  onChange: _util.noop,\n  onScroll: _util.noop,\n  appear: true,\n  componentProps: {}\n};\nScrollOverPack.isScrollOverPack = true;\nexports['default'] = ScrollOverPack;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["D:/Anastasiya/veb/test/my-app/node_modules/rc-scroll-anim/lib/ScrollOverPack.js"],"names":["Object","defineProperty","exports","value","_extends2","require","_extends3","_interopRequireDefault","_objectWithoutProperties2","_objectWithoutProperties3","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_createClass2","_createClass3","_inherits2","_inherits3","_react","_react2","_propTypes","_propTypes2","_EventDispatcher","_EventDispatcher2","_ScrollElement2","_ScrollElement3","_util","obj","__esModule","ScrollOverPack","_ScrollElement","key","getDerivedStateFromProps","props","_ref","prevProps","nextState","children","toArrayChildren","_this","__proto__","getPrototypeOf","call","scrollEventListener","e","getParam","show","state","_this$props","always","replay","isTop","elementShowHeight","clientHeight","leavePlayHeight","enter","setState","eventType","removeEventListener","target","bottomLeave","playHeight","topLeave","oneEnter","componentDidUpdate","_this2","inListener","_listeners","scroll","some","c","n","split","addScrollEvent","render","_props","playScale","component","scrollEvent","appear","location","targetId","onChange","onScroll","componentProps","windowIsUndefined","createElement","childToRender","map","item","Date","now","Math","random","toString","replace","type","isTweenOne","cloneElement","paused","reverse","propTypes","any","bool","func","className","string","style","object","defaultProps","noop","isScrollOverPack","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _EventDispatcher = require('./EventDispatcher');\n\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\nvar _ScrollElement2 = require('./ScrollElement');\n\nvar _ScrollElement3 = _interopRequireDefault(_ScrollElement2);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar ScrollOverPack = function (_ScrollElement) {\n  (0, _inherits3['default'])(ScrollOverPack, _ScrollElement);\n  (0, _createClass3['default'])(ScrollOverPack, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, _ref) {\n      var prevProps = _ref.prevProps;\n\n      var nextState = {\n        prevProps: props\n      };\n      if (prevProps && props !== prevProps) {\n        nextState.children = (0, _util.toArrayChildren)(props.children);\n      }\n      return nextState;\n    }\n  }]);\n\n  function ScrollOverPack(props) {\n    (0, _classCallCheck3['default'])(this, ScrollOverPack);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (ScrollOverPack.__proto__ || Object.getPrototypeOf(ScrollOverPack)).call(this, props));\n\n    _this.scrollEventListener = function (e) {\n      _this.getParam(e);\n      var show = _this.state.show;\n      var _this$props = _this.props,\n          always = _this$props.always,\n          replay = _this$props.replay;\n\n      var isTop = _this.elementShowHeight > _this.clientHeight + _this.leavePlayHeight;\n      if (_this.enter || !replay && isTop) {\n        if (!show) {\n          _this.setState({\n            show: true\n          });\n        }\n        if (!always && _this.eventType) {\n          _EventDispatcher2['default'].removeEventListener(_this.eventType, _this.scrollEventListener, _this.target);\n        }\n      } else if (always) {\n        var bottomLeave = _this.elementShowHeight < _this.playHeight;\n        // 设置往上时的出场点...\n        var topLeave = replay ? isTop : null;\n        if (topLeave || bottomLeave) {\n          if (show) {\n            _this.setState({\n              show: false\n            });\n          }\n        }\n      }\n    };\n\n    _this.children = (0, _util.toArrayChildren)(props.children);\n    _this.oneEnter = false;\n    _this.enter = false;\n    _this.state = {\n      show: false,\n      children: (0, _util.toArrayChildren)(props.children)\n    };\n    return _this;\n  }\n\n  (0, _createClass3['default'])(ScrollOverPack, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      if (prevProps !== this.props) {\n        var always = this.props.always;\n        var show = this.state.show;\n\n        var inListener = _EventDispatcher2['default']._listeners.scroll && _EventDispatcher2['default']._listeners.scroll.some(function (c) {\n          return c.n === _this2.eventType.split('.')[1];\n        });\n        if (always && !inListener) {\n          this.addScrollEvent();\n        } else if (!always && !show) {\n          this.scrollEventListener();\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          playScale = _props.playScale,\n          replay = _props.replay,\n          component = _props.component,\n          always = _props.always,\n          scrollEvent = _props.scrollEvent,\n          appear = _props.appear,\n          location = _props.location,\n          targetId = _props.targetId,\n          onChange = _props.onChange,\n          onScroll = _props.onScroll,\n          componentProps = _props.componentProps,\n          props = (0, _objectWithoutProperties3['default'])(_props, ['playScale', 'replay', 'component', 'always', 'scrollEvent', 'appear', 'location', 'targetId', 'onChange', 'onScroll', 'componentProps']);\n\n      if (_util.windowIsUndefined) {\n        return (0, _react.createElement)(component, (0, _extends3['default'])({}, props, componentProps));\n      }\n      var childToRender = void 0;\n      if (!this.oneEnter) {\n        var show = !appear;\n        var children = (0, _util.toArrayChildren)(props.children).map(function (item) {\n          if (!item) {\n            return null;\n          }\n          var key = item.key || (Date.now() + Math.random()).toString(16).replace('.', '');\n          return item.type.isTweenOne ? _react2['default'].cloneElement(item, (0, _extends3['default'])({}, item.props, { key: key, paused: !show })) : _react2['default'].cloneElement(item, (0, _extends3['default'])({}, item.props, { key: key }), show && item.props.children);\n        });\n        childToRender = (0, _react.createElement)(component, (0, _extends3['default'])({}, props, componentProps), children);\n        this.oneEnter = true;\n      } else {\n        if (!this.state.show) {\n          this.children = this.children.map(function (item) {\n            if (!item) {\n              return null;\n            }\n            var key = item.key || (Date.now() + Math.random()).toString(16).replace('.', '');\n            // 判断 TweenOne;\n            if (item.type.isTweenOne) {\n              return _react2['default'].cloneElement(item, { key: key, reverse: true });\n            }\n            return _react2['default'].cloneElement(item, { key: key }, null);\n          });\n        } else {\n          this.children = this.state.children;\n        }\n        childToRender = (0, _react.createElement)(component, (0, _extends3['default'])({}, props, componentProps), this.children);\n      }\n      return childToRender;\n    }\n  }]);\n  return ScrollOverPack;\n}(_ScrollElement3['default']);\n\nScrollOverPack.propTypes = {\n  component: _propTypes2['default'].any,\n  playScale: _propTypes2['default'].any,\n  always: _propTypes2['default'].bool,\n  scrollEvent: _propTypes2['default'].func,\n  children: _propTypes2['default'].any,\n  className: _propTypes2['default'].string,\n  style: _propTypes2['default'].any,\n  replay: _propTypes2['default'].bool,\n  onChange: _propTypes2['default'].func,\n  onScroll: _propTypes2['default'].func,\n  appear: _propTypes2['default'].bool,\n  componentProps: _propTypes2['default'].object\n};\nScrollOverPack.defaultProps = {\n  component: 'div',\n  playScale: 0.5,\n  always: true,\n  scrollEvent: _util.noop,\n  replay: false,\n  onChange: _util.noop,\n  onScroll: _util.noop,\n  appear: true,\n  componentProps: {}\n};\n\nScrollOverPack.isScrollOverPack = true;\n\nexports['default'] = ScrollOverPack;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}