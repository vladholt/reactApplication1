{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _EventDispatcher = require('./EventDispatcher');\n\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar ScrollElement = function (_React$Component) {\n  (0, _inherits3['default'])(ScrollElement, _React$Component);\n  (0, _createClass3['default'])(ScrollElement, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, _ref) {\n      var prevProps = _ref.prevProps,\n          $self = _ref.$self;\n      var nextState = {\n        prevProps: props\n      };\n\n      if (prevProps && props !== prevProps) {\n        $self.scrollEventListener();\n      }\n\n      return nextState; // eslint-disable-line\n    }\n  }]);\n\n  function ScrollElement(props) {\n    (0, _classCallCheck3['default'])(this, ScrollElement);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (ScrollElement.__proto__ || Object.getPrototypeOf(ScrollElement)).call(this, props));\n\n    _this.getParam = function (e) {\n      _this.clientHeight = _this.target ? _this.target.clientHeight : (0, _util.windowHeight)();\n      var scrollTop = _this.target ? _this.target.scrollTop : (0, _util.currentScrollTop)();\n\n      var domRect = _this.dom.getBoundingClientRect();\n\n      var targetTop = _this.target ? _this.target.getBoundingClientRect().top : 0;\n      var offsetTop = domRect.top + scrollTop - targetTop;\n      _this.elementShowHeight = scrollTop - offsetTop + _this.clientHeight;\n      var playScale = (0, _util.transformArguments)(_this.props.playScale);\n      var playScaleEnterArray = /([\\+\\-]?[0-9#\\.]+)(px|vh|%)?/.exec(String(playScale[0])); // eslint-disable-line\n\n      if (!playScaleEnterArray[2]) {\n        _this.playHeight = _this.clientHeight * parseFloat(playScale[0]);\n      } else if (playScaleEnterArray[2] === 'px') {\n        _this.playHeight = parseFloat(playScaleEnterArray[1]);\n      } else {\n        _this.playHeight = _this.clientHeight * parseFloat(playScaleEnterArray[1]) / 100;\n      }\n\n      var leaveHeight = domRect.height;\n      var playScaleLeaveArray = /([\\+\\-]?[0-9#\\.]+)(px|vh|%)?/.exec(String(playScale[1])); // eslint-disable-line\n\n      if (!playScaleLeaveArray[2]) {\n        _this.leavePlayHeight = leaveHeight * parseFloat(playScale[1]);\n      } else if (playScaleLeaveArray[2] === 'px') {\n        _this.leavePlayHeight = parseFloat(playScaleLeaveArray[1]);\n      } else {\n        _this.leavePlayHeight = leaveHeight * parseFloat(playScaleLeaveArray[1]) / 100;\n      }\n\n      var enter = _this.props.replay ? _this.elementShowHeight >= _this.playHeight && _this.elementShowHeight <= _this.clientHeight + _this.leavePlayHeight : _this.elementShowHeight >= _this.playHeight;\n      var enterOrLeave = enter ? 'enter' : 'leave';\n      var mode = _this.enter !== enter || typeof _this.enter !== 'boolean' ? enterOrLeave : null;\n\n      if (mode) {\n        _this.props.onChange({\n          mode: mode,\n          id: _this.props.id\n        });\n      }\n\n      _this.props.onScroll({\n        domEvent: e,\n        scrollTop: scrollTop,\n        showHeight: _this.elementShowHeight,\n        offsetTop: offsetTop,\n        id: _this.props.id\n      });\n\n      _this.enter = enter;\n    };\n\n    _this.addScrollEvent = function () {\n      _EventDispatcher2['default'].addEventListener(_this.eventType, _this.scrollEventListener, _this.target);\n\n      var scrollTop = (0, _util.currentScrollTop)();\n\n      if (!scrollTop) {\n        _this.scrollEventListener();\n      }\n    };\n\n    _this.scrollEventListener = function (e) {\n      _this.getParam(e);\n    };\n\n    _this.state = {\n      $self: _this\n    };\n    return _this;\n  }\n\n  (0, _createClass3['default'])(ScrollElement, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (_util.windowIsUndefined) {\n        return;\n      }\n\n      this.dom = _reactDom2['default'].findDOMNode(this);\n      var date = Date.now();\n      this.target = this.props.targetId && document.getElementById(this.props.targetId);\n      var length = _EventDispatcher2['default']._listeners.scroll ? _EventDispatcher2['default']._listeners.scroll.length : 0;\n      this.eventType = 'scroll.scrollEvent' + date + length;\n      this.addScrollEvent();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      _EventDispatcher2['default'].removeEventListener(this.eventType, this.scrollEventListener, this.target);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          component = _props.component,\n          playScale = _props.playScale,\n          location = _props.location,\n          targetId = _props.targetId,\n          onScroll = _props.onScroll,\n          onChange = _props.onChange,\n          replay = _props.replay,\n          componentProps = _props.componentProps,\n          props = (0, _objectWithoutProperties3['default'])(_props, ['component', 'playScale', 'location', 'targetId', 'onScroll', 'onChange', 'replay', 'componentProps']);\n      return _react2['default'].createElement(component, (0, _extends3['default'])({}, props, componentProps));\n    }\n  }]);\n  return ScrollElement;\n}(_react2['default'].Component);\n\nScrollElement.propTypes = {\n  component: _propTypes2['default'].any,\n  playScale: _propTypes2['default'].any,\n  id: _propTypes2['default'].string,\n  onChange: _propTypes2['default'].func,\n  onScroll: _propTypes2['default'].func,\n  location: _propTypes2['default'].string,\n  targetId: _propTypes2['default'].string,\n  replay: _propTypes2['default'].bool,\n  componentProps: _propTypes2['default'].object\n};\nScrollElement.defaultProps = {\n  component: 'div',\n  onChange: _util.noop,\n  onScroll: _util.noop,\n  playScale: 0.5,\n  replay: false,\n  componentProps: {}\n};\nScrollElement.isScrollElement = true;\nexports['default'] = ScrollElement;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["D:/Anastasiya/veb/test/my-app/node_modules/rc-scroll-anim/lib/ScrollElement.js"],"names":["Object","defineProperty","exports","value","_extends2","require","_extends3","_interopRequireDefault","_objectWithoutProperties2","_objectWithoutProperties3","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_createClass2","_createClass3","_inherits2","_inherits3","_react","_react2","_reactDom","_reactDom2","_propTypes","_propTypes2","_EventDispatcher","_EventDispatcher2","_util","obj","__esModule","ScrollElement","_React$Component","key","getDerivedStateFromProps","props","_ref","prevProps","$self","nextState","scrollEventListener","_this","__proto__","getPrototypeOf","call","getParam","e","clientHeight","target","windowHeight","scrollTop","currentScrollTop","domRect","dom","getBoundingClientRect","targetTop","top","offsetTop","elementShowHeight","playScale","transformArguments","playScaleEnterArray","exec","String","playHeight","parseFloat","leaveHeight","height","playScaleLeaveArray","leavePlayHeight","enter","replay","enterOrLeave","mode","onChange","id","onScroll","domEvent","showHeight","addScrollEvent","addEventListener","eventType","state","componentDidMount","windowIsUndefined","findDOMNode","date","Date","now","targetId","document","getElementById","length","_listeners","scroll","componentWillUnmount","removeEventListener","render","_props","component","location","componentProps","createElement","Component","propTypes","any","string","func","bool","object","defaultProps","noop","isScrollElement","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _EventDispatcher = require('./EventDispatcher');\n\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar ScrollElement = function (_React$Component) {\n  (0, _inherits3['default'])(ScrollElement, _React$Component);\n  (0, _createClass3['default'])(ScrollElement, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, _ref) {\n      var prevProps = _ref.prevProps,\n          $self = _ref.$self;\n\n      var nextState = {\n        prevProps: props\n      };\n      if (prevProps && props !== prevProps) {\n        $self.scrollEventListener();\n      }\n      return nextState; // eslint-disable-line\n    }\n  }]);\n\n  function ScrollElement(props) {\n    (0, _classCallCheck3['default'])(this, ScrollElement);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (ScrollElement.__proto__ || Object.getPrototypeOf(ScrollElement)).call(this, props));\n\n    _this.getParam = function (e) {\n      _this.clientHeight = _this.target ? _this.target.clientHeight : (0, _util.windowHeight)();\n      var scrollTop = _this.target ? _this.target.scrollTop : (0, _util.currentScrollTop)();\n      var domRect = _this.dom.getBoundingClientRect();\n      var targetTop = _this.target ? _this.target.getBoundingClientRect().top : 0;\n      var offsetTop = domRect.top + scrollTop - targetTop;\n      _this.elementShowHeight = scrollTop - offsetTop + _this.clientHeight;\n      var playScale = (0, _util.transformArguments)(_this.props.playScale);\n      var playScaleEnterArray = /([\\+\\-]?[0-9#\\.]+)(px|vh|%)?/.exec(String(playScale[0])); // eslint-disable-line\n      if (!playScaleEnterArray[2]) {\n        _this.playHeight = _this.clientHeight * parseFloat(playScale[0]);\n      } else if (playScaleEnterArray[2] === 'px') {\n        _this.playHeight = parseFloat(playScaleEnterArray[1]);\n      } else {\n        _this.playHeight = _this.clientHeight * parseFloat(playScaleEnterArray[1]) / 100;\n      }\n      var leaveHeight = domRect.height;\n      var playScaleLeaveArray = /([\\+\\-]?[0-9#\\.]+)(px|vh|%)?/.exec(String(playScale[1])); // eslint-disable-line\n      if (!playScaleLeaveArray[2]) {\n        _this.leavePlayHeight = leaveHeight * parseFloat(playScale[1]);\n      } else if (playScaleLeaveArray[2] === 'px') {\n        _this.leavePlayHeight = parseFloat(playScaleLeaveArray[1]);\n      } else {\n        _this.leavePlayHeight = leaveHeight * parseFloat(playScaleLeaveArray[1]) / 100;\n      }\n      var enter = _this.props.replay ? _this.elementShowHeight >= _this.playHeight && _this.elementShowHeight <= _this.clientHeight + _this.leavePlayHeight : _this.elementShowHeight >= _this.playHeight;\n      var enterOrLeave = enter ? 'enter' : 'leave';\n      var mode = _this.enter !== enter || typeof _this.enter !== 'boolean' ? enterOrLeave : null;\n      if (mode) {\n        _this.props.onChange({ mode: mode, id: _this.props.id });\n      }\n      _this.props.onScroll({\n        domEvent: e,\n        scrollTop: scrollTop,\n        showHeight: _this.elementShowHeight,\n        offsetTop: offsetTop,\n        id: _this.props.id\n      });\n      _this.enter = enter;\n    };\n\n    _this.addScrollEvent = function () {\n      _EventDispatcher2['default'].addEventListener(_this.eventType, _this.scrollEventListener, _this.target);\n      var scrollTop = (0, _util.currentScrollTop)();\n      if (!scrollTop) {\n        _this.scrollEventListener();\n      }\n    };\n\n    _this.scrollEventListener = function (e) {\n      _this.getParam(e);\n    };\n\n    _this.state = {\n      $self: _this\n    };\n    return _this;\n  }\n\n  (0, _createClass3['default'])(ScrollElement, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (_util.windowIsUndefined) {\n        return;\n      }\n      this.dom = _reactDom2['default'].findDOMNode(this);\n      var date = Date.now();\n      this.target = this.props.targetId && document.getElementById(this.props.targetId);\n\n      var length = _EventDispatcher2['default']._listeners.scroll ? _EventDispatcher2['default']._listeners.scroll.length : 0;\n      this.eventType = 'scroll.scrollEvent' + date + length;\n      this.addScrollEvent();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      _EventDispatcher2['default'].removeEventListener(this.eventType, this.scrollEventListener, this.target);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          component = _props.component,\n          playScale = _props.playScale,\n          location = _props.location,\n          targetId = _props.targetId,\n          onScroll = _props.onScroll,\n          onChange = _props.onChange,\n          replay = _props.replay,\n          componentProps = _props.componentProps,\n          props = (0, _objectWithoutProperties3['default'])(_props, ['component', 'playScale', 'location', 'targetId', 'onScroll', 'onChange', 'replay', 'componentProps']);\n\n      return _react2['default'].createElement(component, (0, _extends3['default'])({}, props, componentProps));\n    }\n  }]);\n  return ScrollElement;\n}(_react2['default'].Component);\n\nScrollElement.propTypes = {\n  component: _propTypes2['default'].any,\n  playScale: _propTypes2['default'].any,\n  id: _propTypes2['default'].string,\n  onChange: _propTypes2['default'].func,\n  onScroll: _propTypes2['default'].func,\n  location: _propTypes2['default'].string,\n  targetId: _propTypes2['default'].string,\n  replay: _propTypes2['default'].bool,\n  componentProps: _propTypes2['default'].object\n};\nScrollElement.defaultProps = {\n  component: 'div',\n  onChange: _util.noop,\n  onScroll: _util.noop,\n  playScale: 0.5,\n  replay: false,\n  componentProps: {}\n};\n\nScrollElement.isScrollElement = true;\nexports['default'] = ScrollElement;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}