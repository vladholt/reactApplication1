{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _tweenFunctions = require('tween-functions');\n\nvar _tweenFunctions2 = _interopRequireDefault(_tweenFunctions);\n\nvar _rcTweenOne = require('rc-tween-one');\n\nvar _ticker = require('rc-tween-one/lib/ticker');\n\nvar _ticker2 = _interopRequireDefault(_ticker);\n\nvar _EventDispatcher = require('./EventDispatcher');\n\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar tickerId = 0;\n\nfunction playScaleToArray(playScale) {\n  if (Array.isArray(playScale)) {\n    if (playScale.length === 2) {\n      return playScale;\n    }\n\n    return [playScale[0] || 0, playScale[1] || 1];\n  } else if (playScale) {\n    return [playScale, 1];\n  }\n\n  return [0, 1];\n}\n\nvar ScrollParallax = function (_React$Component) {\n  (0, _inherits3['default'])(ScrollParallax, _React$Component);\n  (0, _createClass3['default'])(ScrollParallax, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, _ref) {\n      var prevProps = _ref.prevProps,\n          $self = _ref.$self;\n      var nextState = {\n        prevProps: props\n      };\n\n      if (prevProps && props !== prevProps) {\n        var equal = (0, _util.objectEqual)(prevProps.animation, props.animation);\n\n        if (!equal) {\n          $self.setDefaultData(props.animation || {});\n          $self.timeline.resetAnimData();\n          $self.timeline.setDefaultData($self.defaultTweenData);\n        }\n      }\n\n      return nextState; // eslint-disable-line\n    }\n  }]);\n\n  function ScrollParallax(props) {\n    (0, _classCallCheck3['default'])(this, ScrollParallax);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (ScrollParallax.__proto__ || Object.getPrototypeOf(ScrollParallax)).call(this, props));\n\n    _this.setDefaultData = function (_vars) {\n      var vars = (0, _util.dataToArray)(_vars);\n\n      var varsForIn = function varsForIn(item, i) {\n        var playScale = playScaleToArray(item.playScale).map(function (data) {\n          return data * _this.clientHeight;\n        });\n        var aItem = (0, _extends3['default'])({}, item);\n        delete aItem.playScale;\n        var cItem = (0, _extends3['default'])({}, item);\n        delete cItem.playScale;\n        cItem.delay = playScale[0];\n        aItem.delay = playScale[0];\n        cItem.duration = playScale[1] - playScale[0];\n        aItem.duration = playScale[1] - playScale[0];\n        cItem.onStart = null;\n        cItem.onUpdate = null;\n        cItem.onComplete = null;\n        cItem.onRepeat = null;\n        aItem.onStart = aItem.onStart || _util.noop;\n        aItem.onComplete = aItem.onComplete || _util.noop;\n        aItem.onUpdate = aItem.onUpdate || _util.noop;\n        aItem.onStartBack = aItem.onStartBack || _util.noop;\n        aItem.onCompleteBack = aItem.onCompleteBack || _util.noop;\n        _this.defaultTweenData[i] = cItem;\n        _this.defaultData[i] = aItem;\n      };\n\n      vars.forEach(varsForIn);\n    };\n\n    _this.resizeEventListener = function () {\n      if (_this.defaultData[_this.defaultData.length - 1] && _this.defaultData[_this.defaultData.length - 1].onCompleteBool && !_this.props.always) {\n        return;\n      }\n\n      _this.scrollTop = (0, _util.currentScrollTop)();\n      _this.target = _this.props.targetId && document.getElementById(_this.props.targetId);\n      _this.clientHeight = _this.target ? _this.target.clientHeight : (0, _util.windowHeight)();\n\n      _this.setDefaultData(_this.props.animation || {});\n\n      if (_this.timeline) {\n        _this.timeline.resetDefaultStyle();\n      }\n\n      _this.timeline = new _rcTweenOne.Tween(_this.dom, _this.defaultTweenData);\n\n      _this.timeline.init();\n\n      _this.scrollEventListener();\n    };\n\n    _this.scrollEventListener = function () {\n      var scrollTop = _this.target ? _this.target.scrollTop : (0, _util.currentScrollTop)();\n      _this.clientHeight = _this.target ? _this.target.clientHeight : (0, _util.windowHeight)();\n      var dom = _this.props.location ? document.getElementById(_this.props.location) : _this.dom;\n\n      if (!dom) {\n        throw new Error('\"location\" is null');\n      }\n\n      var targetTop = _this.target ? _this.target.getBoundingClientRect().top : 0;\n      var offsetTop = dom.getBoundingClientRect().top + scrollTop - targetTop;\n      var elementShowHeight = scrollTop - offsetTop + _this.clientHeight;\n      var currentShow = _this.scrollTop - offsetTop + _this.clientHeight;\n\n      _this.defaultData.forEach(function (item, i) {\n        var duration = _this.defaultData.map(function (c, ii) {\n          return ii < i && c.delay + c.duration || 0;\n        }).reduce(function (a, b) {\n          return a + b;\n        });\n\n        var noUpdate = void 0;\n\n        if (elementShowHeight <= item.delay + duration) {\n          if (!item.onCompleteBackBool && item.onStartBool) {\n            item.onCompleteBackBool = true;\n            noUpdate = true;\n            item.onCompleteBack();\n          }\n        } else {\n          item.onCompleteBackBool = false;\n        }\n\n        if (elementShowHeight >= item.delay + duration) {\n          if (!item.onStartBool) {\n            item.onStartBool = true;\n            noUpdate = true;\n            item.onStart();\n          }\n        } else {\n          item.onStartBool = false;\n        }\n\n        if (elementShowHeight <= item.delay + item.duration + duration) {\n          if (!item.onStartBackBool && item.onCompleteBool) {\n            item.onStartBackBool = true;\n            noUpdate = true;\n            item.onStartBack();\n          }\n        } else {\n          item.onStartBackBool = false;\n        }\n\n        if (elementShowHeight >= item.delay + item.duration + duration) {\n          if (!item.onCompleteBool) {\n            item.onCompleteBool = true;\n            noUpdate = true;\n            item.onComplete();\n          }\n        } else {\n          item.onCompleteBool = false;\n        }\n\n        if (elementShowHeight >= item.delay + duration && elementShowHeight <= item.delay + item.duration + duration && !noUpdate) {\n          item.onUpdate(elementShowHeight / (item.delay + item.duration + duration));\n        }\n      });\n\n      _ticker2['default'].clear(_this.tickerId);\n\n      _this.tickerId = 'scrollParallax' + Date.now() + '-' + tickerId;\n      tickerId++;\n\n      if (tickerId >= Number.MAX_VALUE) {\n        tickerId = 0;\n      }\n\n      var startFrame = _ticker2['default'].frame;\n\n      _ticker2['default'].wake(_this.tickerId, function () {\n        var moment = (_ticker2['default'].frame - startFrame) * _ticker2['default'].perFrame;\n\n        var ratio = _tweenFunctions2['default'].easeOutQuad(moment, 0.08, 1, 300);\n\n        _this.timeline.frame(currentShow + ratio * (elementShowHeight - currentShow));\n\n        if (moment >= 300) {\n          _ticker2['default'].clear(_this.tickerId);\n        }\n      });\n\n      _this.scrollTop = scrollTop; // 如果不一直靠滚动来执行动画，always=false而且动画全执行完了，，删除scrollEvent;\n\n      if (_this.defaultData[_this.defaultData.length - 1].onCompleteBool && _this.eventType && !_this.props.always) {\n        _EventDispatcher2['default'].removeEventListener(_this.eventType, _this.scrollEventListener, _this.target);\n      }\n    };\n\n    _this.scrollTop = 0;\n    _this.defaultTweenData = [];\n    _this.defaultData = [];\n    _this.state = {\n      $self: _this\n    };\n    return _this;\n  }\n\n  (0, _createClass3['default'])(ScrollParallax, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.dom = _reactDom2['default'].findDOMNode(this);\n      var date = Date.now();\n      var length = _EventDispatcher2['default']._listeners.scroll ? _EventDispatcher2['default']._listeners.scroll.length : 0;\n      this.eventType = 'scroll.scrollEvent' + date + length;\n      this.eventResize = 'resize.resizeEvent' + date + length;\n      this.resizeEventListener();\n\n      _EventDispatcher2['default'].addEventListener(this.eventResize, this.resizeEventListener, this.target); // 预注册;\n\n\n      this.timeline.frame(0);\n      this.scrollEventListener();\n\n      _EventDispatcher2['default'].addEventListener(this.eventType, this.scrollEventListener, this.target);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      _EventDispatcher2['default'].removeEventListener(this.eventType, this.scrollEventListener, this.target);\n\n      _EventDispatcher2['default'].removeEventListener(this.eventResize, this.resizeEventListener, this.target);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          animation = _props.animation,\n          always = _props.always,\n          component = _props.component,\n          location = _props.location,\n          targetId = _props.targetId,\n          componentProps = _props.componentProps,\n          props = (0, _objectWithoutProperties3['default'])(_props, ['animation', 'always', 'component', 'location', 'targetId', 'componentProps']);\n      var style = (0, _extends3['default'])({}, props.style);\n      Object.keys(style).forEach(function (p) {\n        if (p.indexOf('filter') >= 0 || p.indexOf('Filter') >= 0) {\n          // ['Webkit', 'Moz', 'Ms', 'ms'].forEach(prefix=> style[`${prefix}Filter`] = style[p]);\n          var transformArr = ['Webkit', 'Moz', 'Ms', 'ms'];\n\n          for (var i = 0; i < transformArr.length; i++) {\n            style[transformArr[i] + 'Filter'] = style[p];\n          }\n        }\n      });\n      props.style = style;\n      return _react2['default'].createElement(this.props.component, (0, _extends3['default'])({}, props, componentProps));\n    }\n  }]);\n  return ScrollParallax;\n}(_react2['default'].Component);\n\nScrollParallax.propTypes = {\n  component: _propTypes2['default'].any,\n  animation: _propTypes2['default'].any,\n  always: _propTypes2['default'].bool,\n  location: _propTypes2['default'].string,\n  children: _propTypes2['default'].any,\n  className: _propTypes2['default'].string,\n  style: _propTypes2['default'].any,\n  id: _propTypes2['default'].string,\n  targetId: _propTypes2['default'].string,\n  componentProps: _propTypes2['default'].object\n};\nScrollParallax.defaultProps = {\n  component: 'div',\n  always: true,\n  componentProps: {}\n};\nScrollParallax.isScrollParallax = true;\nexports['default'] = ScrollParallax;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["D:/Anastasiya/veb/test/my-app/node_modules/rc-scroll-anim/lib/ScrollParallax.js"],"names":["Object","defineProperty","exports","value","_objectWithoutProperties2","require","_objectWithoutProperties3","_interopRequireDefault","_extends2","_extends3","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_createClass2","_createClass3","_inherits2","_inherits3","_react","_react2","_reactDom","_reactDom2","_propTypes","_propTypes2","_tweenFunctions","_tweenFunctions2","_rcTweenOne","_ticker","_ticker2","_EventDispatcher","_EventDispatcher2","_util","obj","__esModule","tickerId","playScaleToArray","playScale","Array","isArray","length","ScrollParallax","_React$Component","key","getDerivedStateFromProps","props","_ref","prevProps","$self","nextState","equal","objectEqual","animation","setDefaultData","timeline","resetAnimData","defaultTweenData","_this","__proto__","getPrototypeOf","call","_vars","vars","dataToArray","varsForIn","item","i","map","data","clientHeight","aItem","cItem","delay","duration","onStart","onUpdate","onComplete","onRepeat","noop","onStartBack","onCompleteBack","defaultData","forEach","resizeEventListener","onCompleteBool","always","scrollTop","currentScrollTop","target","targetId","document","getElementById","windowHeight","resetDefaultStyle","Tween","dom","init","scrollEventListener","location","Error","targetTop","getBoundingClientRect","top","offsetTop","elementShowHeight","currentShow","c","ii","reduce","a","b","noUpdate","onCompleteBackBool","onStartBool","onStartBackBool","clear","Date","now","Number","MAX_VALUE","startFrame","frame","wake","moment","perFrame","ratio","easeOutQuad","eventType","removeEventListener","state","componentDidMount","findDOMNode","date","_listeners","scroll","eventResize","addEventListener","componentWillUnmount","render","_props","component","componentProps","style","keys","p","indexOf","transformArr","createElement","Component","propTypes","any","bool","string","children","className","id","object","defaultProps","isScrollParallax","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _tweenFunctions = require('tween-functions');\n\nvar _tweenFunctions2 = _interopRequireDefault(_tweenFunctions);\n\nvar _rcTweenOne = require('rc-tween-one');\n\nvar _ticker = require('rc-tween-one/lib/ticker');\n\nvar _ticker2 = _interopRequireDefault(_ticker);\n\nvar _EventDispatcher = require('./EventDispatcher');\n\nvar _EventDispatcher2 = _interopRequireDefault(_EventDispatcher);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar tickerId = 0;\n\nfunction playScaleToArray(playScale) {\n  if (Array.isArray(playScale)) {\n    if (playScale.length === 2) {\n      return playScale;\n    }\n    return [playScale[0] || 0, playScale[1] || 1];\n  } else if (playScale) {\n    return [playScale, 1];\n  }\n  return [0, 1];\n}\n\nvar ScrollParallax = function (_React$Component) {\n  (0, _inherits3['default'])(ScrollParallax, _React$Component);\n  (0, _createClass3['default'])(ScrollParallax, null, [{\n    key: 'getDerivedStateFromProps',\n    value: function getDerivedStateFromProps(props, _ref) {\n      var prevProps = _ref.prevProps,\n          $self = _ref.$self;\n\n      var nextState = {\n        prevProps: props\n      };\n      if (prevProps && props !== prevProps) {\n        var equal = (0, _util.objectEqual)(prevProps.animation, props.animation);\n        if (!equal) {\n          $self.setDefaultData(props.animation || {});\n          $self.timeline.resetAnimData();\n          $self.timeline.setDefaultData($self.defaultTweenData);\n        }\n      }\n      return nextState; // eslint-disable-line\n    }\n  }]);\n\n  function ScrollParallax(props) {\n    (0, _classCallCheck3['default'])(this, ScrollParallax);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, (ScrollParallax.__proto__ || Object.getPrototypeOf(ScrollParallax)).call(this, props));\n\n    _this.setDefaultData = function (_vars) {\n      var vars = (0, _util.dataToArray)(_vars);\n      var varsForIn = function varsForIn(item, i) {\n        var playScale = playScaleToArray(item.playScale).map(function (data) {\n          return data * _this.clientHeight;\n        });\n        var aItem = (0, _extends3['default'])({}, item);\n        delete aItem.playScale;\n        var cItem = (0, _extends3['default'])({}, item);\n        delete cItem.playScale;\n        cItem.delay = playScale[0];\n        aItem.delay = playScale[0];\n        cItem.duration = playScale[1] - playScale[0];\n        aItem.duration = playScale[1] - playScale[0];\n        cItem.onStart = null;\n        cItem.onUpdate = null;\n        cItem.onComplete = null;\n        cItem.onRepeat = null;\n        aItem.onStart = aItem.onStart || _util.noop;\n        aItem.onComplete = aItem.onComplete || _util.noop;\n        aItem.onUpdate = aItem.onUpdate || _util.noop;\n        aItem.onStartBack = aItem.onStartBack || _util.noop;\n        aItem.onCompleteBack = aItem.onCompleteBack || _util.noop;\n        _this.defaultTweenData[i] = cItem;\n        _this.defaultData[i] = aItem;\n      };\n      vars.forEach(varsForIn);\n    };\n\n    _this.resizeEventListener = function () {\n      if (_this.defaultData[_this.defaultData.length - 1] && _this.defaultData[_this.defaultData.length - 1].onCompleteBool && !_this.props.always) {\n        return;\n      }\n      _this.scrollTop = (0, _util.currentScrollTop)();\n      _this.target = _this.props.targetId && document.getElementById(_this.props.targetId);\n      _this.clientHeight = _this.target ? _this.target.clientHeight : (0, _util.windowHeight)();\n      _this.setDefaultData(_this.props.animation || {});\n      if (_this.timeline) {\n        _this.timeline.resetDefaultStyle();\n      }\n      _this.timeline = new _rcTweenOne.Tween(_this.dom, _this.defaultTweenData);\n      _this.timeline.init();\n      _this.scrollEventListener();\n    };\n\n    _this.scrollEventListener = function () {\n      var scrollTop = _this.target ? _this.target.scrollTop : (0, _util.currentScrollTop)();\n      _this.clientHeight = _this.target ? _this.target.clientHeight : (0, _util.windowHeight)();\n      var dom = _this.props.location ? document.getElementById(_this.props.location) : _this.dom;\n      if (!dom) {\n        throw new Error('\"location\" is null');\n      }\n      var targetTop = _this.target ? _this.target.getBoundingClientRect().top : 0;\n      var offsetTop = dom.getBoundingClientRect().top + scrollTop - targetTop;\n      var elementShowHeight = scrollTop - offsetTop + _this.clientHeight;\n      var currentShow = _this.scrollTop - offsetTop + _this.clientHeight;\n      _this.defaultData.forEach(function (item, i) {\n        var duration = _this.defaultData.map(function (c, ii) {\n          return ii < i && c.delay + c.duration || 0;\n        }).reduce(function (a, b) {\n          return a + b;\n        });\n        var noUpdate = void 0;\n        if (elementShowHeight <= item.delay + duration) {\n          if (!item.onCompleteBackBool && item.onStartBool) {\n            item.onCompleteBackBool = true;\n            noUpdate = true;\n            item.onCompleteBack();\n          }\n        } else {\n          item.onCompleteBackBool = false;\n        }\n        if (elementShowHeight >= item.delay + duration) {\n          if (!item.onStartBool) {\n            item.onStartBool = true;\n            noUpdate = true;\n            item.onStart();\n          }\n        } else {\n          item.onStartBool = false;\n        }\n\n        if (elementShowHeight <= item.delay + item.duration + duration) {\n          if (!item.onStartBackBool && item.onCompleteBool) {\n            item.onStartBackBool = true;\n            noUpdate = true;\n            item.onStartBack();\n          }\n        } else {\n          item.onStartBackBool = false;\n        }\n\n        if (elementShowHeight >= item.delay + item.duration + duration) {\n          if (!item.onCompleteBool) {\n            item.onCompleteBool = true;\n            noUpdate = true;\n            item.onComplete();\n          }\n        } else {\n          item.onCompleteBool = false;\n        }\n        if (elementShowHeight >= item.delay + duration && elementShowHeight <= item.delay + item.duration + duration && !noUpdate) {\n          item.onUpdate(elementShowHeight / (item.delay + item.duration + duration));\n        }\n      });\n      _ticker2['default'].clear(_this.tickerId);\n      _this.tickerId = 'scrollParallax' + Date.now() + '-' + tickerId;\n      tickerId++;\n      if (tickerId >= Number.MAX_VALUE) {\n        tickerId = 0;\n      }\n      var startFrame = _ticker2['default'].frame;\n      _ticker2['default'].wake(_this.tickerId, function () {\n        var moment = (_ticker2['default'].frame - startFrame) * _ticker2['default'].perFrame;\n        var ratio = _tweenFunctions2['default'].easeOutQuad(moment, 0.08, 1, 300);\n        _this.timeline.frame(currentShow + ratio * (elementShowHeight - currentShow));\n        if (moment >= 300) {\n          _ticker2['default'].clear(_this.tickerId);\n        }\n      });\n\n      _this.scrollTop = scrollTop;\n      // 如果不一直靠滚动来执行动画，always=false而且动画全执行完了，，删除scrollEvent;\n      if (_this.defaultData[_this.defaultData.length - 1].onCompleteBool && _this.eventType && !_this.props.always) {\n        _EventDispatcher2['default'].removeEventListener(_this.eventType, _this.scrollEventListener, _this.target);\n      }\n    };\n\n    _this.scrollTop = 0;\n    _this.defaultTweenData = [];\n    _this.defaultData = [];\n    _this.state = {\n      $self: _this\n    };\n    return _this;\n  }\n\n  (0, _createClass3['default'])(ScrollParallax, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.dom = _reactDom2['default'].findDOMNode(this);\n      var date = Date.now();\n      var length = _EventDispatcher2['default']._listeners.scroll ? _EventDispatcher2['default']._listeners.scroll.length : 0;\n      this.eventType = 'scroll.scrollEvent' + date + length;\n      this.eventResize = 'resize.resizeEvent' + date + length;\n      this.resizeEventListener();\n      _EventDispatcher2['default'].addEventListener(this.eventResize, this.resizeEventListener, this.target);\n      // 预注册;\n      this.timeline.frame(0);\n\n      this.scrollEventListener();\n      _EventDispatcher2['default'].addEventListener(this.eventType, this.scrollEventListener, this.target);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      _EventDispatcher2['default'].removeEventListener(this.eventType, this.scrollEventListener, this.target);\n      _EventDispatcher2['default'].removeEventListener(this.eventResize, this.resizeEventListener, this.target);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          animation = _props.animation,\n          always = _props.always,\n          component = _props.component,\n          location = _props.location,\n          targetId = _props.targetId,\n          componentProps = _props.componentProps,\n          props = (0, _objectWithoutProperties3['default'])(_props, ['animation', 'always', 'component', 'location', 'targetId', 'componentProps']);\n\n      var style = (0, _extends3['default'])({}, props.style);\n      Object.keys(style).forEach(function (p) {\n        if (p.indexOf('filter') >= 0 || p.indexOf('Filter') >= 0) {\n          // ['Webkit', 'Moz', 'Ms', 'ms'].forEach(prefix=> style[`${prefix}Filter`] = style[p]);\n          var transformArr = ['Webkit', 'Moz', 'Ms', 'ms'];\n          for (var i = 0; i < transformArr.length; i++) {\n            style[transformArr[i] + 'Filter'] = style[p];\n          }\n        }\n      });\n      props.style = style;\n      return _react2['default'].createElement(this.props.component, (0, _extends3['default'])({}, props, componentProps));\n    }\n  }]);\n  return ScrollParallax;\n}(_react2['default'].Component);\n\nScrollParallax.propTypes = {\n  component: _propTypes2['default'].any,\n  animation: _propTypes2['default'].any,\n  always: _propTypes2['default'].bool,\n  location: _propTypes2['default'].string,\n  children: _propTypes2['default'].any,\n  className: _propTypes2['default'].string,\n  style: _propTypes2['default'].any,\n  id: _propTypes2['default'].string,\n  targetId: _propTypes2['default'].string,\n  componentProps: _propTypes2['default'].object\n};\nScrollParallax.defaultProps = {\n  component: 'div',\n  always: true,\n  componentProps: {}\n};\n\n\nScrollParallax.isScrollParallax = true;\nexports['default'] = ScrollParallax;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}